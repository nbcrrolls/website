<html>
  <head>
    <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
    <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="base.js"> </script>

    <script type="text/javascript">
      // Define variables for the charts 

      // Collaborators US geographical distribution 
      data1 = new google.visualization.DataTable();
      data1.addColumn('string', 'State');
      data1.addColumn('number', 'Collaborators');

      var options1 = {
          region: "US", 
          resolution: "provinces",
          backgroundColor: "#FFFFFF",
          datalessRegionColor: "#EEE5E5",
          colorAxis: { minValue : 1, maxValue : 21, 
                       colors : ['#0860b3','#0860b3' ],
                      // use to highlight different colors : ['#b3e2f9','#0860b3' ],
                      //colors : ['#00dddd','#00aadd','#0077dd','#0044dd','#0011dd' ],
            },
        };

        // Collaborators World geographical distribution 
        data2 = new google.visualization.DataTable();
        data2.addColumn('string', 'Country');
        data2.addColumn('number', 'Collaborators');

        var options2 = {
            region: "world",
            resolution: "country",
            backgroundColor: "#FFFFFF",
            datalessRegionColor: "#EEE5E5",
            colorAxis: { minValue : 1, maxValue : 68, 
			 colors : ['#0860b3','#0860b3' ],
			 // use to highlight different colors : ['#b3e2f9','#0860b3' ],
                         //colors : ['#00dddd','#00aadd','#0077dd','#0044dd','#0011dd' ],
            },
        };

      // Add data from stats
      function addData() {
        // US distribution
        data1.addRows([
        ["WA", 4], ["DC", 1], ["WI", 1], ["WV", 1], ["FL", 1],
        ["NJ", 1], ["TX", 5], ["LA", 2], ["NC", 2], ["NY", 3],
        ["PA", 1], ["VA", 1], ["CA", 21], ["AL", 2], ["IL", 2],
        ["GA", 2], ["ID", 1], ["CT", 1], ["MA", 4], ["OH", 1],
        ["UT", 4], ["MO", 3], ["MN", 3], ["OR", 1], ]);
        
        // world distribution
        data2.addRows([
        ["Canada", 2],
        ["Netherlands", 1],
        ["Italy", 1],
        ["Ireland", 1],
        ["Poland", 1],
        ["Scotland", 2],
        ["Luxembourg", 1],
        ["UK", 3],
        ["New", 1],
        ["Taiwan", 1],
        ["Spain", 1],
        ["US", 68],
        ]);

      };

      // Define charts drawing
      function drawChart() {
        addData();

        // US distribution
        var chart1 = new google.visualization.GeoChart(document.getElementById('mapUS_div'));
        chart1.draw(data1, options1);

        // world distribution
        var chart2 = new google.visualization.GeoChart(document.getElementById('mapWorld_div'));
        chart2.draw(data2, options2);
      }

      // Draw charts
      google.setOnLoadCallback(drawChart);

    </script>

  </head>
  <body>
    <h3 align="center"><font color="#0082A0">Geographical distribution of NBCR collaborators</font></h3>
    <p>
     <b>Maps</b> show geographical distribution of NBCR collaborators in the US and worldwide.<br>
     Collaborators total is 83, including 68 in the US.<br><br>
     Use <b>Convert</b> buttons to view an image in a frame below and 
    <b>Save</b> buttons to copy an image to your Desktop.<br>
    </p>

     <!-- 2 geolocation graphs -->
    <div id="mapUS_div" style="width: 400px; height: 360px; float: left"></div>
    <div id="mapWorld_div" style="width: 400px; height: 360px; float: left"></div>
    <br style="clear: left;" />

     <!-- US map buttons -->
    <button style="position:relative; left:60 " onclick="saveAsImg(document.getElementById('mapUS_div'));">Save US map as PNG image</button>
    <button style="position:relative; left:60" onclick="toImg(document.getElementById('mapUS_div'), document.getElementById('img_div'));">Convert US map to image</button>
    
     <!-- World map buttons -->
    <button style="position:relative; left:140 " onclick="saveAsImg(document.getElementById('mapWorld_div'));">Save world map as PNG image</button>
    <button style="position:relative; left:140" onclick="toImg(document.getElementById('mapWorld_div'), document.getElementById('img_div'));">Convert world map to image</button>
    
    <!-- "image placement" position  on the page-->
    <div id="img_div" style="width: 400px; position: relative; top:10;  z-index: 10; border: 1px solid #0082A0; color: #0082A0">
      Image will be placed here
    </div>

</body>
</html>
